<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="icon" href="img/edictor-small.png" type="image/png" />
<link rel="stylesheet" href="css/main.css" type="text/css" />
<title>EDICTOR</title>
</head>
<body>
  <div id="copy_value" class="side_message" style="display:none"></div>
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container" style="width:100%">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <img class="navbar-brand"
	style="margin-top:2px;padding:0px;margin-right:5px;width:50px;height:50px;"
	src="img/edictor-small.png" alt="tsv" />
        <a class="navbar-brand" onclick="event.preventDefault();window.location.reload();">EDICTOR</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              ABOUT 
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a onclick="loadAjax(event, 'sortable', 'about', 'help col-sm-8');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  ABOUT
                </a>
              </li>
              <li>
                <a id="toggle_contact" onclick="loadAjax(event, 'sortable','contact','smallbox col-sm-5');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  CONTACT
                </a>
              </li>
              <li>
                <a id="toggle_help" onclick="loadAjax(event, 'sortable','help','help col-sm-8');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  HELP
                </a>
              </li>
            </ul>
          </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              DISPLAY
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a id="toggle_menu" onclick="toggleDisplay(event,'menu');">
                  <span class="glyphicon glyphicon-ok"></span>
                  <span class="glyphicon glyphicon-remove" style="display: none"></span>
                  MENU
                </a>
              </li>
              <!--<li>
                <a id="toggle_settings" onclick="toggleDisplay(event,'settings');">
                  <span class="glyphicon glyphicon-ok" style="display:none"></span>
                  <span class="glyphicon glyphicon-remove"></span>
                  SETTINGS
                </a>
	      </li>-->
              <li>
                <a id="toggle_settings" onclick="loadAjax(event,'sortable', 'settings', 'help col-sm-8');">
                  <span class="glyphicon glyphicon-ok" style="display:none"></span>
                  <span class="glyphicon glyphicon-remove"></span>
                  SETTINGS
                </a>
              </li>
            </ul>
          </li>
	  <li class="dropdown">
	    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
	      EDIT
              <span class="caret"></span>
	    </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a id="toggle_filedisplay" onclick="toggleDisplay(event,'filedisplay')">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  WORDLIST
                </a>
              </li>
	      <li>
		<a id="toggle_cognates" onclick="loadAjax(event, 'sortable', 'cognates', 'colx largebox'); handle_cognate_selection();">
		  <span class="glyphicon glyphicon-remove"></span>
		  <span class="glyphicon glyphicon-ok" style="display:none"></span>
		  COGNATE SETS
		</a>
	      </li>
	    </ul>
	  </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              ANALYZE
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a id="toggle_phonology" onclick="loadAjax(event, 'sortable', 'phonology', 'largebox');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  PHONOLOGY
                </a>
              </li>
              <li>
                <a id="toggle_morphology" onclick="loadAjax(event, 'sortable', 'morphology', 'largebox');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
		  MORPHOLOGY
                </a>
              </li>
              <li>
                <a id="toggle_correspondences" onclick="loadAjax(event, 'sortable', 'correspondences', 'largebox');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  CORRESPONDENCES
                </a>
              </li>
            </ul>
          </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              CUSTOMIZE
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a id="toggle_templates" onclick="loadAjax(event, 'sortable', 'templates', 'help col-sm-8');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  TEMPLATES
                </a>
              </li>
              <li>
                <a id="toggle_customize" onclick="loadAjax(event, 'sortable', 'customize', 'help col-sm-8');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  CUSTOM SETTINGS
                </a>
              </li>
              <li>
                <a id="toggle_databases" onclick="loadAjax(event, 'sortable', 'databases', 'help col-sm-8');">
                  <span class="glyphicon glyphicon-remove"></span>
                  <span class="glyphicon glyphicon-ok" style="display: none"></span>
                  DATABASES
                </a>
              </li>
            </ul>
          </li>

          <li>
            <a href="" onclick="event.preventDefault();window.location.reload();">RELOAD</a>
          </li>
        </ul>
        <ul style="float-right" class="nav navbar-nav navbar-right">
          <li><a href="http://github.com/dighl/edictor/">GitHub</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
  <div id="outerbox" name="top">
    <ul id="sortable">

      <!-- MENU -->
      <li id="menu_handle" class="colx" style="display:block;width:100%;">
	<div id="menu">
	  <span class="main_handle pull-left"></span>
	  <button type="button" onclick="$('#toggle_menu > span').toggle();$('#menu').toggle();" class="pull-right close" style="margin-left:5px">
	    <span aria-hidden="true">&times;</span>
	    <span class="sr-only">Close</span>
	  </button>
	  <br class="menubr">
	  <input type="file" id="file" name="file" class="btn btn-primary pull-left submit3" style="margin-left:0px;margin-right:3px;padding:7px;" />
	  <input type="text" class="form-control pull-left mright textfield" style="width:140px;display:inline" onkeyup="showSpinner(function(){handleAjax(event,'url')});" id="ajaxfile" placeholder="select remote file" />
	  <input type="text" class="form-control pull-left mright textfield" style="width:140px;display:inline;" onkeyup="showSpinner(function(){handleAjax(event,'db')});" id="database" placeholder="select database" />
	  <input id="last" type="button" onclick="showWLS(1);$('#last').removeClass('unhidden');$('#last').addClass('hidden');" class="submit hidden" value="&nbsp;LAST&nbsp;" />

	  <div id="mainsettings" class="btn-group pull-right" style="display:none">
	    <button type="button" title="refresh current dataset"
	      onclick="resetFormat(CFG['formatter']);resetRootFormat(CFG['root_formatter']);createSelectors();applyFilter();showWLS(getCurrent());display_current_cognate();" class="btn-primary mleft btn submit3">
	      <span class="glyphicon glyphicon-refresh"></span>
	    </button>
	    <button class="submit3 btn-primary mleft btn titled" title="Filter data (shortcut [F3])" id="textfieldsettings" onclick="$('#textfields').toggle();">
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	    </button>
	    <button class="submit3 btn-primary mleft btn titled" title="Save (shortcut [CTRL+S])" id="refresh" onclick="refreshFile();">
	      <span class="glyphicon glyphicon-floppy-disk"></span>
	    </button> 
	    <button class="submit3 btn-primary mleft btn titled" title="Download (shortcut [CTRL+E])" id="save" onclick="saveFile();">
	      <span class="glyphicon glyphicon-download-alt"></span>
	    </button>
	  </div>
	  <br class="menubr"><br class="menubr">
	  <div id="undoredo" class="btn-group pull-right">
	    <button title="UNDO (shortcut [CTRL+Y])" id="undo" onclick="UnDo();" class="mleft btn-primary btn titled hidden submit3" style="margin:3px">
	      <span class="glyphicon glyphicon-arrow-left"></span>
	    </button>
	    <button title="REDO (shortcut [CTRL+Z])" id="redo" onclick="ReDo();" class="mleft btn-primary btn titled hidden submit3" style="margin:3px">
	      <span class="glyphicon glyphicon-arrow-right"></span>
	    </button>
	  </div>
	  <br class="menubr">
	  <!-- FILTERS -->
	  <div id="textfields" class="pull-left"
	    style="display:none;overflow: visible; clear:both;">
	    <div class="btn-group">
	      <select class="multiselect" multiple id="select_doculects" title="filter doculects"></select>
	      <select class="multiselect" multiple id="select_concepts" title="filter concepts"></select>
	      <select class="multiselect" multiple id="select_columns" title="filter columns"></select>
	      <button class="btn-primary btn mright titled submit3" onclick="applyFilter();showWLS(getCurrent());">
		OK
	      </button>
	    </div>
	    <div class="btn-group pull-right">
	      <input type="text" class="form-control textfield mleft" style="width:25%;" onkeyup="addColumn(event);" id="add_column" placeholder="add column" />
	      <input type="text" class="form-control textfield mleft" style="width:25%;" onkeyup="filterColumnValue(event);" id="filter_all" placeholder="COLUMN = value" />
	    </div>
	  </div>
	</div>
      </li>
      <!-- MAIN TABLE -->
      <li class="colx">
	<div id="filedisplay">
	  <span class="main_handle pull-left"></span>
	  <button type="button" onclick="$('#toggle_filedisplay > span').toggle();$('#filedisplay').toggle();" class="pull-right close" style="margin-left:5px">
	    <span aria-hidden="true">&times;</span>
	    <span class="sr-only">Close</span>
	  </button>
	  <br>
	  <div class="btn-group pull-left">
	    <button class="btn-primary btn submit3 mright hidden" id="filename"></button>
	    <button class="btn-primary btn submit3 mright hidden" id="current"></button>
	    <input id="previous" type="button" class="btn btn-primary mright submit3 hidden" value="0-0"/>
	    <input id="first" type="button"    class="btn btn-primary mright submit3 unhidden" value="START " onclick="showWLS(1)" />
	    <input id="next" type="button"     class="btn btn-primary mright submit3 hidden" value="1-1" />
	  </div>
	  <button type="button" class="btn-primary titled btn submit3 pull-right"
	    title="show help"
	    onclick="UTIL.show_help('wordlist', 'qlc', 'filedisplay');" 
	    style="margin-left:5px;"><span class="glyphicon glyphicon-question-sign"></span>
	  </button>

	  <br><br>
	  <div id="db"></div>
	  <div name="wordlist" style="overflow:visible;" id="qlc" ></div>
	  <div name="wordlist_help" class="help-message" style="overflow:visible;" id="wordlist_help" ></div>
	  <div id="store" style="display:none"></div>
	</div>
      </li>

      <!-- SETTINGS +++ delete this part completely +++-->
      <!--<li class="colx" style="display:inline;">
	<div id="settingsx" class="settings" style="display:none">
	  <span class="main_handle pull-left"></span>
	  <button type="button" onclick="toggleDisplay(event,'settings');" class="pull-right close" style="margin-left:5px"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	  <table>
	    <tr>
	      <th colspan="2">
		Settings
	      </th>
	    </tr>
	    <tr>
	      <th>Preview</th>
	      <td>
		<div class="btn-group">
		  <input id="preview10"  type="button"  class="btn mright btn-primary submit"  onclick="CFG['preview'] =  10; showWLS(1);" value="&nbsp;10&nbsp;" />
		  <input id="preview20"  type="button"  class="btn mright btn-primary submit"
		  onclick="CFG['preview'] =  20; showWLS(1);" value="&nbsp;20&nbsp;" />
		  <input id="preview50"  type="button"  class="btn mright btn-primary submit"  onclick="CFG['preview'] =  50; showWLS(1);" value="&nbsp;50&nbsp;" />
		  <input id="preview100" type="button"  class="btn mright btn-primary submit"  onclick="CFG['preview'] = 100; showWLS(1);" value="&nbsp;100&nbsp;" />
		  <input id="preview100" type="button"  class="btn mright btn-primary submit"  onclick="CFG['preview'] = 200; showWLS(1);" value="&nbsp;200&nbsp;" />
		  <input id="preview100" type="button"  class="btn mright btn-primary submit"  onclick="CFG['preview'] = 500; showWLS(1);" value="&nbsp;500&nbsp;" />
		</div>
	      </td>
	    </tr>
	    <tr id="formatter"></tr>
	    <tr id="columncb"></tr>
	    <tr id="root_formatter"></tr>
	  </table>
	</div>
      </li>-->
      <!-- drop zone and information handling -->
      <li class="colx" style="width:100%">
	<div class="drop_zone_start" id="eingang">Files are loading, please wait...</div>
	<div id="view" onclick="$('#welcome').remove();showWLS(1);toggleDisplay(event,'filedisplay');$('#textfields').show();" class="view" style="display:none" value="&nbsp;VIEW&nbsp;">
	  Open the file.
	</div>
      </li>
      <li class="colx largebox" id="welcome" style="background:#2d6ca2;min-width:50%;max-width:800px;">
	  <span class="main_handle pull-left"></span>
	  <button type="button" onclick="$('#welcome').remove();" class="pull-right close" style="margin-left:5px"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>

	<div class="colx">
		<img style="display:table-cell;float:left;" src="img/wordlists.png" width="49%" alt="edictor" />
	  <div style="color:white;font-size:150%;display:table-cell;float:left;width:49%;max-width:50%;" >
	    <b>Welcome to the EDICTOR!</b> <br><br> The EDICTOR is an interactive tool for creating, maintaining, and publishing
		etymological data which is stored in simple TSV format. <br><br>
		Use the EDICTOR to 
		<ul><li>create your datasets from scratch,</li>
		  <li>annotate your existing datasets,</li>
		  <li>identify and annotate cognates,</li>
		  <li>create alignments,</li>
		  <li>check your data, and</li>
		  <li>carry out various kinds of analyses.</li></ul>
		In order to get started with an existing example dataset, just click 
		<a style="color:crimson" href="http://edictor.digling.org?file=BAI.tsv">this
		  link</a>. Press 
		<span class="pointed" onclick="$('#welcome').remove();loadAjax(event, 'sortable', 'about', 'help col-sm-8');" style="color:crimson">here</span> to learn more ABOUT the EDICTOR,
	      or <span class="pointed" onclick="$('#welcome').remove();loadAjax(event, 'sortable', 'help', 'help col-sm-8');" 
		style="color:crimson">here</span> to get further HELP.
	  </div>
	</div>
      </li>
    </ul>
  </div>
  <div id="#data_saved" style="color:white;font-size:12px">Data has not yet been saved.</div>
  <!--<script data-main="prison/main" src="prison/lib/vendor/require.js"></script>-->
  <script src="prison_old/main.js"></script>

<script>
var load = PRISON.import(
    'highlight',
    'sampa',
    'edit',
    'pinyin',
    'multiple',
    'features',
    'js/vendor/jquery-1.10.2',
    'js/vendor/jquery-ui',
    'js/vendor/FileSaver',
    'js/vendor/undomanager',
    'js/vendor/bootstrap.min',
    'js/vendor/bootstrap-multiselect',
    'js/vendor/spin',
    'js/tsv/util',
    'js/tsv/alignments',
    'js/tsv/cognates',
    'js/tsv/phonology',
    'js/tsv/morphology',
    'js/tsv/partial',
    'js/tsv/correspondences',
    'js/tsv/wordlist',
    'js/tsv/starter'
    );

</script>

<div id="popup_background" class="popup_background"></div>
</body>
</html>
